CREATE TABLE IF NOT EXISTS users
(   id int GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    name  VARCHAR(255) NOT NULL,
    email VARCHAR(512) NOT NULL,
    CONSTRAINT UQ_USER_EMAIL UNIQUE(email),
    CONSTRAINT pk_user PRIMARY KEY(id));

CREATE TABLE IF NOT EXISTS events
(   id int GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    annotation  VARCHAR(2000) NOT NULL,
    category int,
    description VARCHAR(7000) NOT NULL,
    eventDate timestamp,
    locationId int,
    paid BOOL,
    participantLimit int,
    requestModeration BOOL,
    title VARCHAR(120),
    creatorId int,
    CONSTRAINT pk_event PRIMARY KEY(id));

CREATE TABLE IF NOT EXISTS locations
(   id int GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    lat float,
    lon float,
    CONSTRAINT pk_location PRIMARY KEY(id));

CREATE TABLE IF NOT EXISTS categories
(   id int GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    name VARCHAR(120),
    CONSTRAINT pk_categories PRIMARY KEY(id));

ALTER TABLE events ADD FOREIGN KEY (locationId) REFERENCES locations (id);
ALTER TABLE events ADD FOREIGN KEY (creatorId) REFERENCES users (id);
ALTER TABLE events ADD FOREIGN KEY (category) REFERENCES categories (id);

DELETE FROM categories;
DELETE FROM locations;
DELETE FROM events;
DELETE FROM users;

ALTER TABLE users ALTER COLUMN id RESTART WITH 1;
ALTER TABLE events ALTER COLUMN id RESTART WITH 1;
ALTER TABLE locations ALTER COLUMN id RESTART WITH 1;
ALTER TABLE categories ALTER COLUMN id RESTART WITH 1;